<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MailFlow - Email Campaign Builder</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #E6F3FF 0%, #B3D9FF 40%, #CCE7FF 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px 30px;
            border-radius: 10px;
            box-shadow: 0 2px 20px rgba(102, 126, 234, 0.15);
            border: 1px solid rgba(102, 126, 234, 0.1);
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* Configuration Modal Styles */
        .config-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .config-modal.show {
            display: flex;
        }

        .config-modal-content {
            background: white;
            border-radius: 10px;
            padding: 30px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }

        .config-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }

        .config-modal-title {
            font-size: 20px;
            font-weight: 600;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .config-close-btn {
            background: none;
            border: none;
            font-size: 24px;
            color: #666;
            cursor: pointer;
            padding: 5px;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .config-close-btn:hover {
            background: #f0f0f0;
            color: #333;
        }

        .config-code {
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 0;
            font-size: 14px;
            line-height: 1.5;
            overflow-x: auto;
            margin-bottom: 20px;
        }

        .config-code pre {
            margin: 0;
            padding: 20px;
            border-radius: 6px;
        }

        .config-actions {
            display: flex;
            gap: 15px;
            justify-content: flex-end;
        }

        .config-copy-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .config-copy-btn:hover {
            background: #2980b9;
            transform: translateY(-1px);
        }

        .config-description {
            background: #e7f3ff;
            border-left: 4px solid #3498db;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 0 8px 8px 0;
        }

        .config-description h4 {
            color: #2c3e50;
            margin-bottom: 8px;
        }

        .config-description p {
            color: #666;
            margin: 0;
            font-size: 14px;
            line-height: 1.5;
        }

        .config-tips-widget {
            position: relative;
            border: 1px solid rgba(0, 152, 247, 0.6) !important;
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.9), rgba(0, 152, 247, 0.02)) !important;
            backdrop-filter: blur(10px);
            box-shadow:
                0 0 40px rgba(0, 152, 247, 0.5),
                0 0 80px rgba(0, 152, 247, 0.3),
                0 12px 40px rgba(0, 152, 247, 0.25),
                inset 0 1px 0 rgba(255, 255, 255, 0.7),
                inset 0 -1px 0 rgba(0, 152, 247, 0.2);
            transform: translateY(-1px);
            width: 100%;
            margin: 0;
            font-size: 14px;
            padding: 20px;
            border-radius: 10px;
        }

        .froala-config-widget {
            position: relative;
            border: 1px solid rgba(20, 181, 158, 0.6) !important;
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.9), rgba(20, 181, 158, 0.02)) !important;
            backdrop-filter: blur(10px);
            box-shadow:
                0 0 40px rgba(20, 181, 158, 0.4),
                0 0 80px rgba(20, 181, 158, 0.2),
                0 12px 40px rgba(20, 181, 158, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.7),
                inset 0 -1px 0 rgba(20, 181, 158, 0.2);
            transform: translateY(-1px);
            width: 100%;
            margin: 0;
            font-size: 14px;
            padding: 20px;
            border-radius: 10px;
        }

        .config-tip {
            border: 2px solid #0098F7;
            border-radius: 8px;
            padding: 12px 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 12px;
            background: linear-gradient(135deg, rgba(0, 152, 247, 0.1), rgba(0, 152, 247, 0.05));
            box-shadow: 0 2px 8px rgba(0, 152, 247, 0.15);
        }

        .config-tip:hover {
            background: linear-gradient(135deg, rgba(0, 152, 247, 0.2), rgba(0, 152, 247, 0.1));
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 152, 247, 0.3);
        }

        .config-tip-header {
            font-weight: 600;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 8px;
            color: #2c3e50;
        }

        .config-tip-desc {
            font-size: 12px;
            color: #666;
        }

        .widget-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .widget-content {
            font-size: 14px;
            color: #666;
        }

        .config-code-display {
            max-height: 180px;
            overflow-y: auto;
            font-size: 12px;
            line-height: 1.4;
        }

        .copy-config-btn {
            background: #14B59E;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s ease;
        }

        .copy-config-btn:hover {
            background: #0ea58a;
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(20, 181, 158, 0.3);
        }
        
        .logo {
            display: flex;
            align-items: center;
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }
        
        .logo i {
            margin-right: 10px;
            font-size: 28px;
        }
        
        .nav-items {
            display: flex;
            gap: 20px;
        }
        
        .nav-item {
            padding: 10px 20px;
            background: rgba(248, 249, 250, 0.8);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(102, 126, 234, 0.1);
            border-radius: 8px;
            text-decoration: none;
            color: #333;
            transition: all 0.3s ease;
        }
        
        .nav-item:hover {
            background: rgba(102, 126, 234, 0.9);
            color: white;
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }
        
        .main-content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 10px;
            box-shadow: 0 2px 20px rgba(102, 126, 234, 0.15);
            border: 1px solid rgba(102, 126, 234, 0.1);
            overflow: hidden;
        }
        
        .campaign-header {
            background: linear-gradient(45deg, rgba(102, 126, 234, 0.9), rgba(72, 187, 120, 0.9));
            backdrop-filter: blur(10px);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .campaign-header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }
        
        .campaign-header p {
            opacity: 0.9;
            font-size: 16px;
        }
        
        .editor-section {
            padding: 40px;
            padding-bottom: 100px;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }
        
        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .froala-placeholder {
            border: 3px dashed #667eea;
            border-radius: 10px;
            padding: 60px;
            text-align: center;
            background: rgba(102, 126, 234, 0.05);
            margin: 30px 0;
        }
        
        .froala-placeholder h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 24px;
        }
        
        .froala-placeholder p {
            color: #666;
            font-size: 16px;
            margin-bottom: 20px;
        }
        
        .froala-placeholder .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .feature-item {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            color: #667eea;
            font-size: 14px;
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: flex-start;
            margin-top: 30px;
            padding-top: 30px;
            border-top: 2px solid #f0f0f0;
            margin-right: 320px;
        }
        
        @media (max-width: 1200px) {
            .action-buttons {
                margin-right: 0;
                justify-content: center;
            }
        }
        
        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }
        
        .btn-primary {
            background: linear-gradient(45deg, #667eea, #48bb78);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }
        
        .btn-secondary {
            background: rgba(248, 249, 250, 0.9);
            backdrop-filter: blur(5px);
            color: #333;
            border: 2px solid rgba(102, 126, 234, 0.2);
        }
        
        .btn-secondary:hover {
            background: rgba(102, 126, 234, 0.1);
            border-color: rgba(102, 126, 234, 0.3);
            transform: translateY(-1px);
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .stat-item {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }
        
        .stat-number {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 12px;
            opacity: 0.8;
        }
        
        /* Configuration Widgets Responsive */
        .config-widgets-container {
            position: absolute;
            right: 0;
            top: 0;
            width: 300px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            z-index: 10;
        }
        
        .editor-with-widgets {
            position: relative;
            padding-right: 320px;
            margin-bottom: 40px;
        }
        
        @media (max-width: 1200px) {
            .editor-with-widgets {
                padding-right: 0;
            }
            
            .config-widgets-container {
                position: static;
                width: 100%;
                flex-direction: row;
                flex-wrap: wrap;
                margin-top: 20px;
            }
            
            .config-tips-widget,
            .froala-config-widget {
                flex: 1;
                min-width: 300px;
            }
        }
        
        @media (max-width: 768px) {
            .config-widgets-container {
                flex-direction: column;
            }
            
            .config-tips-widget,
            .froala-config-widget {
                flex: none !important;
                min-width: auto !important;
                max-width: none !important;
            }
        }
    </style>
    
    <!-- Froala Editor CSS -->
    <link href="https://cdn.jsdelivr.net/npm/froala-editor@latest/css/froala_editor.pkgd.min.css" rel="stylesheet" type="text/css" />
    <link href="https://cdn.jsdelivr.net/npm/froala-editor@latest/css/froala_style.min.css" rel="stylesheet" type="text/css" />
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">
                <i class="fas fa-envelope"></i>
                MailFlow
            </div>
            <div class="nav-items">
                <a href="#" class="nav-item"><i class="fas fa-chart-bar"></i> Analytics</a>
                <a href="#" class="nav-item"><i class="fas fa-list"></i> Campaigns</a>
                <a href="#" class="nav-item"><i class="fas fa-users"></i> Contacts</a>
                <a href="#" class="nav-item"><i class="fas fa-cog"></i> Settings</a>
            </div>
        </div>

        <div class="main-content">
            <div class="campaign-header">
                <h1><i class="fas fa-plus-circle"></i> Create New Email Campaign</h1>
                <p>Design beautiful, responsive emails that convert with our advanced editor</p>
                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-number">25,000</div>
                        <div class="stat-label">Subscribers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">89%</div>
                        <div class="stat-label">Open Rate</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">15.2%</div>
                        <div class="stat-label">Click Rate</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">$45K</div>
                        <div class="stat-label">Revenue</div>
                    </div>
                </div>
            </div>

            <div class="editor-section">
                <div class="form-row">
                    <div class="form-group">
                        <label><i class="fas fa-tag"></i> Campaign Name</label>
                        <input type="text" placeholder="e.g., Holiday Sale 2024">
                    </div>
                    <div class="form-group">
                        <label><i class="fas fa-envelope-open"></i> Subject Line</label>
                        <input type="text" placeholder="🎄 Don't miss our biggest sale of the year!">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label><i class="fas fa-user"></i> From Name</label>
                        <input type="text" value="MailFlow Team">
                    </div>
                    <div class="form-group">
                        <label><i class="fas fa-at"></i> From Email</label>
                        <input type="email" value="campaigns@mailflow.com">
                    </div>
                </div>

                <div class="form-group">
                    <label><i class="fas fa-users"></i> Send To</label>
                    <select>
                        <option>All Subscribers (25,000)</option>
                        <option>VIP Customers (2,500)</option>
                        <option>New Subscribers (5,000)</option>
                        <option>Inactive Users (3,000)</option>
                    </select>
                </div>

                <div class="editor-with-widgets">
                    <div id="email-editor">
                        <div style="text-align: center; padding: 40px 20px; background: linear-gradient(135deg, #a8e0ea 0%, #5adbb5 100%); color: white; border-radius: 8px; margin-bottom: 20px;">
    <h1 style="margin-bottom: 10px;">🎄 Holiday Sale 2024</h1>
    <h2 style="margin-bottom: 20px; font-weight: 300;">Up to 50% Off Everything!</h2>
    <p style="font-size: 18px; margin-bottom: 30px;">Don't miss our biggest sale of the year</p>
    <a href="#" style="background: white; color: #5adbb5; padding: 15px 30px; text-decoration: none; border-radius: 25px; font-weight: bold; display: inline-block;">Shop Now</a>
</div>
                        
                        <h3>Dear Valued Customer,</h3>
                        <p>We're excited to announce our biggest holiday sale of the year! For a limited time, enjoy up to 50% off on all our products.</p>
                        
                        <h4>What's Included:</h4>
                        <ul>
                            <li>Free shipping on orders over $50</li>
                            <li>Extended return policy through January 31st</li>
                            <li>24/7 customer support during the holidays</li>
                            <li>Exclusive member-only deals</li>
                        </ul>
                        
                        <p>Hurry! Sale ends December 31st, 2024.</p>
                        
                        <p>Best regards,<br>The MailFlow Team</p>
                    </div>

                    <!-- Configuration Widgets Container -->
                    <div class="config-widgets-container">
                        <div class="config-tips-widget">
                            <h3><i class="fas fa-lightbulb" style="color: #0098F7;"></i> Configuration Tips</h3>
                            
                            <div class="email-config-grid" style="display: grid; grid-template-columns: 1fr; gap: 15px;">
                                <div class="config-tip" data-config="responsive">
                                    <div class="config-tip-header">
                                        <i class="fas fa-mobile-alt" style="color: #0098F7;"></i>
                                        Responsive Design
                                    </div>
                                    <div class="config-tip-desc">Mobile-optimized email layouts</div>
                                </div>
                                
                                <div class="config-tip" data-config="emailSafe">
                                    <div class="config-tip-header">
                                        <i class="fas fa-shield-alt" style="color: #0098F7;"></i>
                                        Email-Safe HTML
                                    </div>
                                    <div class="config-tip-desc">Client-compatible HTML tags</div>
                                </div>
                                
                                <div class="config-tip" data-config="imageUpload">
                                    <div class="config-tip-header">
                                        <i class="fas fa-link" style="color: #0098F7;"></i>
                                        Link Configuration
                                    </div>
                                    <div class="config-tip-desc">Email link tracking and UTM parameters</div>
                                </div>
                            </div>
                        </div>

                        <div class="froala-config-widget">
                            <div class="widget-header" style="background: rgba(20, 181, 158, 0.1); color: #14B59E;">
                                <h3 style="margin: 0;"><i class="fas fa-code" style="color: #14B59E;"></i> Complete Froala Config</h3>
                                <button class="copy-config-btn" onclick="copyCompleteEmailConfig()"><i class="fas fa-copy"></i> Copy</button>
                            </div>
                            <div class="widget-content">
                                <p style="font-size: 13px; color: #666; margin-bottom: 10px;">The actual configuration used in this email builder:</p>
                                <div class="config-code-display">
<pre><code>// Complete Email Marketing Configuration
// Combines: Mobile-Responsive + Email Client Compatible + Image Upload + Word/Excel Paste
new FroalaEditor('#email-editor', {
  // Mobile-responsive toolbar configuration
  toolbarButtons: {
    moreText: { buttons: ['bold','italic','underline','strikeThrough','fontFamily','fontSize','textColor','backgroundColor','clearFormatting'] },
    moreParagraph: { buttons: ['alignLeft','alignCenter','alignRight','alignJustify','formatOL','formatUL','paragraphFormat','lineHeight','outdent','indent'] },
    moreRich: { buttons: ['insertLink','insertImage','insertTable','emoticons','insertHR','insertFile'] },
    moreMisc: { buttons: ['undo','redo','fullscreen','html','help'] }
  },
  
  // Mobile/small screen toolbar (responsive design)
  toolbarButtonsSM: {
    moreText: { buttons: ['bold','italic','underline','textColor','backgroundColor'] },
    moreParagraph: { buttons: ['alignLeft','alignCenter','alignRight'] },
    moreRich: { buttons: ['insertLink','insertImage'] }
  },
  
  // Email-optimized editor settings
  heightMin: 400,
  heightMax: 700,
  placeholderText: 'Create your email campaign content here...',
  charCounterCount: true,
  spellcheck: true,
  
  // Email client compatible HTML (Gmail, Outlook, Apple Mail)
  htmlAllowedTags: ['a','b','blockquote','br','div','em','font','h1','h2','h3','h4','h5','h6','hr','i','img','li','ol','p','span','strong','table','tbody','td','th','thead','tr','u','ul','center'],
  htmlRemoveTags: ['script','style','meta','link','head','form'],
  
  // Word & Excel paste support (clean formatting)
  pastePlain: false,
  pasteDeniedTags: ['col','colgroup','meta'],
  pasteDeniedAttrs: ['class','id'],
  
  // Email-optimized image upload & management
  imageUploadURL: '/upload_email_image',
  imageUploadParams: { id: 'email_editor', campaign_id: 'holiday_2024' },
  imageMaxSize: 2 * 1024 * 1024, // 2MB for email compatibility
  imageAllowedTypes: ['jpeg','jpg','png','gif'],
  imageDefaultAlign: 'center',
  imageDefaultDisplay: 'block',
  imageDefaultWidth: 600, // Standard email width
  imageManagerLoadURL: '/load_email_images',
  imageManagerDeleteURL: '/delete_email_image',
  imageResizeWithPercent: true,
  
  // Email-safe link configuration
  linkAutoPrefix: 'https://',
  linkAlwaysBlank: true,
  linkInsertButtons: ['linkBack','|','linkList','linkImage','linkFile'],
  
  // Email table styling
  tableStyles: { 'email-table': 'Email Table','email-table-bordered':'Bordered Email Table' },
  tableDefaultWidth: '100%',
  
  // Email-safe font families
  fontFamily: {
    'Arial, sans-serif': 'Arial',
    'Georgia, serif': 'Georgia',
    'Helvetica, sans-serif': 'Helvetica',
    'Times New Roman, serif': 'Times New Roman',
    'Verdana, sans-serif': 'Verdana'
  },
  
  // Brand colors for email campaigns
  colorsBackground: ['#667eea','#48bb78','#f39c12','#e74c3c','#27ae60','#3498db','#2dd4bf','#1abc9c','#34495e','#95a5a6'],
  colorsText: ['#667eea','#48bb78','#f39c12','#e74c3c','#27ae60','#3498db','#2dd4bf','#1abc9c','#34495e','#95a5a6'],
  
  // Quick insert for email content
  quickInsertButtons: ['image','table','ul','ol','hr'],
  
  // Event handlers for email campaigns
  events: {
    initialized: function () { console.log('Email editor initialized'); },
    contentChanged: function () { console.log('Email content changed'); },
    'image.inserted': function ($img, response) {
      // Make images email-responsive
      $img.attr('style', 'max-width: 100%; height: auto;');
    }
  }
});</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-secondary">
                        <i class="fas fa-save"></i>
                        Save Draft
                    </button>
                    <button class="btn btn-secondary">
                        <i class="fas fa-eye"></i>
                        Preview
                    </button>
                    <button class="btn btn-secondary">
                        <i class="fas fa-paper-plane"></i>
                        Send Test
                    </button>
                    <button class="btn btn-primary">
                        <i class="fas fa-rocket"></i>
                        Send Campaign
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Email Configuration Modal -->
    <div id="emailConfigModal" class="config-modal">
        <div class="config-modal-content">
            <div class="config-modal-header">
                <div class="config-modal-title">
                    <i class="fas fa-cog"></i>
                    <span id="emailConfigTitle">Configuration</span>
                </div>
                <button class="config-close-btn" onclick="closeEmailConfigModal()">&times;</button>
            </div>
            <div class="config-description">
                <p id="emailConfigDesc">Configuration details will appear here.</p>
            </div>
            <pre class="config-code"><code id="emailConfigCode"></code></pre>
            <div class="config-actions">
                <button class="config-copy-btn" onclick="copyEmailConfigCode()"><i class="fas fa-copy"></i> Copy Configuration</button>
            </div>
        </div>
    </div>

    <!-- Froala Editor JS -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/froala-editor@latest/js/froala_editor.pkgd.min.js"></script>
    
    <script>
        // Email configuration examples with verified URLs
        const emailConfigurations = {
            responsive: {
                title: 'Mobile-Responsive Email Design',
                description: 'Configure Froala for mobile-optimized email layouts with responsive toolbars and email-safe styling.',
                docUrl: 'https://froala.com/wysiwyg-editor/docs/getting-started/',
                code: `// Mobile-Responsive Email Configuration
// Documentation: https://froala.com/wysiwyg-editor/docs/getting-started/
new FroalaEditor('#email-editor', {
    // Responsive toolbar for different screen sizes
    toolbarButtonsSM: {
        'moreText': {
            'buttons': ['bold', 'italic', 'textColor']
        },
        'moreParagraph': {
            'buttons': ['alignLeft', 'alignCenter', 'alignRight']
        },
        'moreRich': {
            'buttons': ['insertLink', 'insertImage']
        }
    },
    
    // Mobile-first image settings
    imageDefaultAlign: 'center',
    imageDefaultDisplay: 'block',
    imageDefaultWidth: 300,
    
    // Responsive table settings
    tableDefaultWidth: '100%',
    tableResizer: true,
    tableResizerOffset: 5,
    
    // Responsive design options
    width: '100%',
    heightMin: 200,
    
    // Email-safe fonts
    fontFamily: {
        'Arial, sans-serif': 'Arial',
        'Georgia, serif': 'Georgia', 
        'Helvetica, sans-serif': 'Helvetica',
        'Times New Roman, serif': 'Times New Roman',
        'Verdana, sans-serif': 'Verdana'
    }
});`
            },
            emailSafe: {
                title: 'Email Client Compatible HTML',
                description: 'Restrict HTML to tags and attributes that work reliably across all major email clients like Gmail, Outlook, and Apple Mail.',
                docUrl: 'https://froala.com/wysiwyg-editor/docs/concepts/use-cases/email-marketing-software/',
                code: `// Email Client Compatible HTML Configuration
// Documentation: https://froala.com/wysiwyg-editor/docs/concepts/use-cases/email-marketing-software/
new FroalaEditor('#email-editor', {
    // Email-safe HTML tags only
    htmlAllowedTags: [
        'a', 'b', 'blockquote', 'br', 'div', 'em', 'font', 'h1', 'h2', 'h3', 
        'h4', 'h5', 'h6', 'hr', 'i', 'img', 'li', 'ol', 'p', 'span', 'strong', 
        'table', 'tbody', 'td', 'th', 'thead', 'tr', 'u', 'ul'
    ],
    
    // Email-safe attributes
    htmlAllowedAttrs: [
        'align', 'alt', 'bgcolor', 'border', 'cellpadding', 'cellspacing',
        'color', 'colspan', 'dir', 'face', 'height', 'href', 'lang', 'rowspan',
        'size', 'src', 'style', 'target', 'title', 'width'
    ],
    
    // Email-safe styles
    htmlAllowedStyleProps: [
        'background', 'background-color', 'border', 'border-radius', 'color',
        'font-family', 'font-size', 'font-style', 'font-weight', 'height',
        'line-height', 'margin', 'padding', 'text-align', 'text-decoration',
        'vertical-align', 'width'
    ],
    
    // Remove problematic tags
    htmlRemoveTags: ['script', 'style', 'meta', 'link', 'head'],
    
    // Clean HTML output
    htmlUntouched: false,
    htmlSimpleAmpersand: false,
    
    // Link settings for email
    linkAlwaysBlank: true,
    linkAutoPrefix: 'https://'
});`
            },
            imageUpload: {
                title: 'Email Image & Link Configuration',
                description: 'Configure link settings and tracking for email campaigns with predefined link options and UTM parameters.',
                docUrl: 'https://froala.com/wysiwyg-editor/docs/options/#linkalwaysblank',
                code: `// Email Image & Link Configuration
// Docs: https://froala.com/wysiwyg-editor/docs/options/#linkalwaysblank
// Docs: https://froala.com/wysiwyg-editor/docs/options/#linklist
new FroalaEditor('#email-editor', {
  // Link settings
  linkAlwaysBlank: true, // Always open links in new tab
  linkAutoPrefix: 'https://',

  // Predefined link list
  linkInsertButtons: ['linkBack', '|', 'linkList'],
  linkList: [
    {
      text: 'Shop Now',
      href: 'https://example.com/shop?utm_source=email',
      target: '_blank'
    },
    {
      text: 'Learn More',
      href: 'https://example.com/learn?utm_source=email',
      target: '_blank'
    }
  ],

  // Events (documented only)
  events: {
    initialized: function () {
      console.log('Email editor with tracking initialized');
    },
    contentChanged: function () {
      console.log('Email content changed - tracking may be needed');
    },
    // Use link.inserted event to add custom attributes (documented event)
    'link.inserted': function (link) {
      // Safely add custom tracking attributes here
      link.setAttribute('data-utm_source', 'email_campaign');
      link.setAttribute('data-utm_medium', 'email');
      link.setAttribute('data-utm_campaign', 'holiday_2024');
    }
  }
});`
            }
        };

        // Email modal functions
        function showEmailConfigModal(configKey) {
            const config = emailConfigurations[configKey];
            if (!config) return;
            
            document.getElementById('emailConfigTitle').textContent = config.title;
            
            // Update description with plugin and documentation info
            let descriptionText = config.description;
            if (config.plugin) {
                descriptionText += `\n\nPlugin Required: ${config.plugin}`;
            }
            if (config.docUrl) {
                descriptionText += `\n\nDocumentation: ${config.docUrl}`;
            }
            document.getElementById('emailConfigDesc').textContent = descriptionText;
            
            document.getElementById('emailConfigCode').textContent = config.code;
            document.getElementById('emailConfigModal').classList.add('show');
        }

        function closeEmailConfigModal() {
            document.getElementById('emailConfigModal').classList.remove('show');
        }

        function copyEmailConfigCode() {
            const codeElement = document.getElementById('emailConfigCode');
            const text = codeElement.textContent;

            navigator.clipboard.writeText(text).then(function() {
                const btn = document.querySelector('#emailConfigModal .config-copy-btn');
                const originalText = btn.innerHTML;
                btn.innerHTML = '<i class="fas fa-check"></i> Copied!';

                setTimeout(function() {
                    btn.innerHTML = originalText;
                }, 2000);
            }).catch(function(err) {
                console.error('Failed to copy: ', err);
                alert('Failed to copy code. Please select and copy manually.');
            });
        }

        document.addEventListener('DOMContentLoaded', function() {
            // Add hover effects to email config items
            document.querySelectorAll('.config-tip').forEach(item => {
                item.addEventListener('mouseenter', function() {
                    this.style.borderColor = '#667eea';
                    this.style.backgroundColor = 'rgba(102, 126, 234, 0.05)';
                });
                
                item.addEventListener('mouseleave', function() {
                    this.style.borderColor = '#f0f0f0';
                    this.style.backgroundColor = '';
                });
                
                item.addEventListener('click', function() {
                    const configKey = this.getAttribute('data-config');
                    showEmailConfigModal(configKey);
                });
            });
            
            
            // Close modal when clicking outside
            document.getElementById('emailConfigModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeEmailConfigModal();
                }
            });
            
            // Initialize Froala Editor for Email Marketing
            new FroalaEditor('#email-editor', {
                // Limit the height for email layouts
                heightMin: 300,
                heightMax: 500,

                // Toolbar layout suitable for composing emails
                toolbarButtons: {
                    moreText: {
                        buttons: [
                            'bold', 'italic', 'underline', 'strikeThrough',
                            'fontFamily', 'fontSize', 'textColor', 'backgroundColor',
                            'clearFormatting'
                        ]
                    },
                    moreParagraph: {
                        buttons: [
                            'paragraphFormat', 'alignLeft', 'alignCenter', 'alignRight', 'alignJustify',
                            'formatOL', 'formatUL', 'outdent', 'indent'
                        ]
                    },
                    moreRich: {
                        buttons: [
                            'insertLink', 'insertImage', 'insertTable', 'insertHR'
                        ]
                    },
                    moreMisc: {
                        buttons: [
                            'undo', 'redo', 'html'
                        ],
                        align: 'right',
                        buttonsVisible: 3
                    }
                },
                
                // Mobile toolbar (responsive design)
                toolbarButtonsSM: {
                    moreText: {
                        buttons: ['bold', 'italic', 'underline', 'textColor', 'backgroundColor']
                    },
                    moreParagraph: {
                        buttons: ['alignLeft', 'alignCenter', 'alignRight']
                    },
                    moreRich: {
                        buttons: ['insertLink', 'insertImage']
                    }
                },

                // Ensure pasted content from Word/other editors is cleaned up
                pastePlain: true,

                // Email-friendly defaults
                imageDefaultAlign: 'center',
                imageDefaultDisplay: 'block',
                imageDefaultWidth: 300,

                tableDefaultWidth: '100%',
                tableResizer: true,
                tableResize: true,
                
                // Placeholder text
                placeholderText: 'Create your email campaign content here...',
                
                // Character counter
                charCounterCount: true,
                
                // Enable spell checker
                spellcheck: true,
                
                // Email client compatible HTML (Gmail, Outlook, Apple Mail)
                htmlAllowedTags: [
                    'a', 'b', 'blockquote', 'br', 'div', 'em', 'font', 'h1', 'h2', 'h3', 
                    'h4', 'h5', 'h6', 'hr', 'i', 'img', 'li', 'ol', 'p', 'span', 'strong', 
                    'table', 'tbody', 'td', 'th', 'thead', 'tr', 'u', 'ul', 'center'
                ],
                htmlRemoveTags: ['script', 'style', 'meta', 'link', 'head', 'form'],
                
                // Image settings for email
                imageUploadURL: '/upload_email_image',
                imageUploadParams: {
                    id: 'email_editor',
                    campaign_id: 'holiday_2024'
                },
                imageMaxSize: 2 * 1024 * 1024, // 2MB for email compatibility
                imageAllowedTypes: ['jpeg', 'jpg', 'png', 'gif'],
                
                // Email-safe link configuration
                linkAutoPrefix: 'https://',
                linkAlwaysBlank: true,
                linkInsertButtons: ['linkBack', '|', 'linkList', 'linkImage', 'linkFile'],
                
                // Email table styling
                tableStyles: {
                    'email-table': 'Email Table',
                    'email-table-bordered': 'Bordered Email Table'
                },
                
                // Email-safe font families
                fontFamily: {
                    'Arial, sans-serif': 'Arial',
                    'Georgia, serif': 'Georgia',
                    'Helvetica, sans-serif': 'Helvetica',
                    'Times New Roman, serif': 'Times New Roman',
                    'Verdana, sans-serif': 'Verdana'
                },
                
                // Brand colors for email campaigns
                colorsBackground: ['#667eea', '#48bb78', '#f39c12', '#e74c3c', '#27ae60', '#3498db', '#2dd4bf', '#1abc9c', '#34495e', '#95a5a6'],
                colorsText: ['#667eea', '#48bb78', '#f39c12', '#e74c3c', '#27ae60', '#3498db', '#2dd4bf', '#1abc9c', '#34495e', '#95a5a6'],
                
                // Quick insert for email content
                quickInsertButtons: ['image', 'table', 'ul', 'ol', 'hr'],
                
                // Event handlers for email campaigns
                events: {
                    initialized: function () { 
                        console.log('Email editor initialized'); 
                    },
                    contentChanged: function () { 
                        console.log('Email content changed'); 
                    },
                    'image.inserted': function ($img, response) {
                        // Make images email-responsive
                        $img.attr('style', 'max-width: 100%; height: auto;');
                    }
                }
            });
            
            // Add functionality to email action buttons
            document.querySelector('.action-buttons .btn-primary').addEventListener('click', function() {
                const editor = FroalaEditor.getInstance('#email-editor');
                const content = editor.html.get();
                const subject = document.querySelector('input[placeholder*="Don\'t miss"]').value || 'Holiday Sale 2024';
                const fromName = document.querySelector('input[value="MailFlow Team"]').value;
                const fromEmail = document.querySelector('input[value*="campaigns@"]').value;
                
                console.log('Sending email campaign:', {
                    subject: subject,
                    from_name: fromName,
                    from_email: fromEmail,
                    content: content
                });
                alert('Email campaign sent! (This is a demo - campaign details logged to console)');
            });
            
            document.querySelector('.action-buttons .btn-secondary:nth-child(1)').addEventListener('click', function() {
                const editor = FroalaEditor.getInstance('#email-editor');
                const content = editor.html.get();
                console.log('Saving email draft:', content);
                alert('Email draft saved! (This is a demo - content logged to console)');
            });
            
        document.querySelector('.action-buttons .btn-secondary:nth-child(2)').addEventListener('click', function() {
    const editor = FroalaEditor.getInstance('#email-editor');
    const content = editor.html.get();
    console.log('Email preview:', content);

    // Open preview in new window
    const previewWindow = window.open('', '_blank', 'width=600,height=800,scrollbars=yes');
    previewWindow.document.write(`
        <html>
            <head>
                <title>Email Preview</title>
                <style>
                    body { font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; }
                </style>
            </head>
            <body>
                <h2>Email Preview</h2>
                ${content}
            </body>
        </html>
    `);  // ✅ correct closing backtick and parenthesis
    previewWindow.document.close();
});



            
            document.querySelector('.action-buttons .btn-secondary:nth-child(3)').addEventListener('click', function() {
                const editor = FroalaEditor.getInstance('#email-editor');
                const content = editor.html.get();
                console.log('Sending test email:', content);
                alert('Test email sent! (This is a demo - content logged to console)');
            });
            
            // Function to copy complete email config (global scope)
            window.copyCompleteEmailConfig = function() {
                const configText = `// Complete Email Marketing Configuration\n// Combines: Mobile-Responsive + Email Client Compatible + Image Upload + Word/Excel Paste\nnew FroalaEditor('#email-editor', {
  toolbarButtons: {
    moreText: { buttons: ['bold','italic','underline','strikeThrough','fontFamily','fontSize','textColor','backgroundColor','clearFormatting'] },
    moreParagraph: { buttons: ['alignLeft','alignCenter','alignRight','alignJustify','formatOL','formatUL','paragraphFormat','lineHeight','outdent','indent'] },
    moreRich: { buttons: ['insertLink','insertImage','insertTable','emoticons','insertHR','insertFile'] },
    moreMisc: { buttons: ['undo','redo','fullscreen','html','help'] }
  },
  toolbarButtonsSM: {
    moreText: { buttons: ['bold','italic','underline','textColor','backgroundColor'] },
    moreParagraph: { buttons: ['alignLeft','alignCenter','alignRight'] },
    moreRich: { buttons: ['insertLink','insertImage'] }
  },
  heightMin: 400,
  heightMax: 700,
  placeholderText: 'Create your email campaign content here...',
  charCounterCount: true,
  spellcheck: true,
  // Email client compatible HTML (Gmail, Outlook, Apple Mail)\n  htmlAllowedTags: ['a','b','blockquote','br','div','em','font','h1','h2','h3','h4','h5','h6','hr','i','img','li','ol','p','span','strong','table','tbody','td','th','thead','tr','u','ul','center'],\n  htmlRemoveTags: ['script','style','meta','link','head','form'],\n  \n  // Word & Excel paste support (clean formatting)\n  pastePlain: false,\n  pasteDeniedTags: ['col','colgroup','meta'],\n  pasteDeniedAttrs: ['class','id'],\n  \n  // Email-optimized image upload & management
  imageUploadURL: '/upload_email_image',
  imageUploadParams: { id: 'email_editor', campaign_id: 'holiday_2024' },
  imageMaxSize: 2 * 1024 * 1024,
  imageAllowedTypes: ['jpeg','jpg','png','gif'],
  imageDefaultAlign: 'center',
  imageDefaultDisplay: 'block',
  linkAutoPrefix: 'https://',
  linkAlwaysBlank: true,
  linkInsertButtons: ['linkBack','|','linkList','linkImage','linkFile'],
  tableStyles: { 'email-table': 'Email Table','email-table-bordered':'Bordered Email Table' },
  tableDefaultWidth: '100%',
  fontFamily: {
    'Arial, sans-serif': 'Arial',
    'Georgia, serif': 'Georgia',
    'Helvetica, sans-serif': 'Helvetica',
    'Times New Roman, serif': 'Times New Roman',
    'Verdana, sans-serif': 'Verdana'
  },
  colorsBackground: ['#667eea','#48bb78','#f39c12','#e74c3c','#27ae60','#3498db','#2dd4bf','#1abc9c','#34495e','#95a5a6'],
  colorsText: ['#667eea','#48bb78','#f39c12','#e74c3c','#27ae60','#3498db','#2dd4bf','#1abc9c','#34495e','#95a5a6'],
  quickInsertButtons: ['image','table','ul','ol','hr'],
  // Event handlers for email campaigns
  events: {
    initialized: function () { console.log('Email editor initialized'); },
    contentChanged: function () { console.log('Email content changed'); },
    'image.inserted': function ($img, response) {
      // Make images email-responsive
      $img.attr('style', 'max-width: 100%; height: auto;');
    }
  }
});`;
                navigator.clipboard.writeText(configText).then(function() {
                    const btn = document.querySelector('.froala-config-widget .copy-config-btn');
                    const originalText = btn.innerHTML;
                    btn.innerHTML = '<i class="fas fa-check"></i> Copied!';
                    btn.style.background = '#27ae60';
                    setTimeout(function() {
                        btn.innerHTML = originalText;
                        btn.style.background = '#14B59E';
                    }, 2000);
                }).catch(function(err) {
                    console.error('Failed to copy: ', err);
                    alert('Failed to copy code. Please select and copy manually.');
                });
            };
        });
    </script>
</body>
</html>
